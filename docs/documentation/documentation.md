---
tags:
  - documentation
  - mkdocs
---

# Documentation system


All technical content is written using the [Markdown](https://wikipedia.org/wiki/Markdown) lightweight markup syntax, specifically the [CommonMark](https://commonmark.org).

Documentation leverages the great [MkDocs](https://mkdocs.org) static site generator to build the documentation with the beautiful and feature packed [Material for MkDocs](https://squidfunk.github.io/mkdocs-material/) theme.

Presentations are created using [Marp](https://marp.app/)


## Setting up MkDocs with Material for MkDocs

!!! note
    Unless otherwise specified, all commands are run from the project root directory
!!!


### Installing MkDocs

If not already done, first create a Python virtual environment to install dependencies.
Move to the project root and run the following command:

```console
python -m venv .venv
```

Then activate the virtual environment:

```console
source ./.venv/bin/activate
```

Upgrade `pip` and `setuptools` before installing Python packages:

```console
pip install --upgrade setuptools pip
```

Finally install MkDocs package:

```console
pip install mkdocs
```

Add MkDocs to the list of project requirements:

```console
echo "mkdocs==$(mkdocs --version | cut -d' ' -f3)" >> docs/requirements.in
```


### Initializing the documentation project

Bootstraping a MkDocs project is as simple as running the following command from the project root directory:

```console
mkdocs -v new .
```

This creates the `docs` directory if it doesn't already exist, as well as the `mkdocs.yml` configuration file.

MkDocs coming with a built-in development web server, we can launch it with:

```console
mkdocs -v serve
```

From there, by default, the project documentation can be accessed locally at http://localhost:8000


### Configuring MkDocs

All configuration happens in `mkdocs.yml` file.
See MkDocs configuration [documentation](https://www.mkdocs.org/user-guide/configuration/) for details about the numerous options.

If you add new extensions, plugins, or themes to the configuration be sure to run the following command to make them available:

```console
mkdocs -v get-deps
```


## Installing Material for MkDocs

Installing the great Material for MkDocs is no harder than installing MkDocs:


```console
pip install mkdocs-material
```

Add Material for MkDocs to the list of project requirements:

```console
echo "mkdocs-material==$(pip show mkdocs-material | grep "Version" | cut -d' ' -f2)" >> docs/requirements.in
```

To activate the theme, just set it in the adequate configuration field:

```yaml
site_name: "DevUniversity DevOps Bootcamp 202309: FastAPI-Traefik-K8s"
#...
theme: material
#site_dir: "site"
#...
```

## Setting up versioning

1. First, install mike:

```console
pip install mike
```

2. Update `mkdocs.yml``:

```yaml
extra:
  version:
    provider: mike
```

Make a change to docs/index.md, and publish the first version:

mike deploy --push --update-aliases 0.1 latest

Set the default version to latest

mike set-default --push latest

Now, make another change and publish a new version:

mike deploy --push --update-aliases 0.2 latest

Find more informations on the [Setting up versioning](https://squidfunk.github.io/mkdocs-material/setup/setting-up-versioning/) page of the Material for MkDocs documentation, and of course on the [mike's project page](https://github.com/)

## Publishing documentation site to Netlify

1. Set Python runtime version for Netlify to use:

```console
printf "3.8\n" > runtime.txt
```

2. Set Netlify site settings by creating the `netlify.toml` file:

```toml
# netlify.toml
[build]
  command = "mkdocs build"
  publish = "site"
```

3. Login to your Netlify dashboard and:
   1. Select **Add new site > Import an existing project**
   2. Choose **Deploy with GitHub**
      If the desired repository doesn't appear in the list
      1. Select **Configure the Netlify App on GitHub**
      2. Select organisation in the pop-up window
      3. Select the repository(ies) you want to configure with Netlify
      4. Install Netlify to the selected repository(ies)
   3. Choose the repository to deploy
   4. Netlify loads build and deployment settings from the `netlify.toml` file.
   5. Check the **Branch to deploy**, **Base directory**, **Build command** and **Publish directory** are correct.
   6. Select **Deploy site**.

The site should now be available at Netlify's autogenerated preview link.
The link can be found in **Settings > Domain management > Domains**






For full documentation visit [mkdocs.org](https://www.mkdocs.org).

## Commands

* `mkdocs new [dir-name]` - Create a new project.
* `mkdocs serve` - Start the live-reloading docs server.
* `mkdocs build` - Build the documentation site.
* `mkdocs -h` - Print help message and exit.

## Project layout

    mkdocs.yml    # The configuration file.
    docs/
        index.md  # The documentation homepage.
        ...       # Other markdown pages, images and other files.
